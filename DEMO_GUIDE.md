# 🚀 Duckflow v0.2.1-alpha デモガイド

**RAG搭載プロジェクト理解型AIコーディングエージェント**

## 📋 機能概要

### ✨ 新機能（ステップ2b）
- **RAG（検索拡張生成）**: プロジェクト全体のコードを意味的に検索
- **プロジェクト理解**: 20+言語のコードパターンを自動認識
- **コンテキスト最適化**: 関連コードを自動的にAIプロンプトに含める
- **LangGraph統合**: 複雑なタスクフローを自動実行

## 🎯 デモシナリオ

### シナリオ1: 基本的な使用方法

```bash
# 1. Duckflowを起動
uv run python run_duckflow_v2.py

# 2. ヘルプを表示
help

# 3. 現在の状態を確認
status

# 4. ファイル一覧を表示
ls

# 5. ファイルを読み込み
read codecrafter/main.py
```

### シナリオ2: RAG機能の活用

```bash
# 1. プロジェクトをインデックス化（初回のみ）
index

# 2. インデックス状態を確認
index-status

# 3. コードを意味的に検索
search "agent initialization"
search "file operations" --type=python
search "error handling" --max=3

# 4. グラフ実行状態を確認
graph
```

### シナリオ3: AI対話による開発支援

```bash
# 基本的なファイル作成
"demo.pyファイルを作成して、簡単なHello World関数を実装して"

# プロジェクト理解を活用した開発
"既存のコードスタイルに合わせて、新しいツールクラスを作成して"

# エラー対応
"最近のエラーを調べて修正方法を提案して"
```

## 🔧 高度な機能

### RAG検索の活用
- プロジェクト内の類似コードを自動発見
- 既存のパターンと一貫性のある実装を提案
- 関連するファイル・機能を自動的に参照

### LangGraphフロー
```
[ユーザー質問] → [思考] → [コンテキスト収集] → [ツール実行] → [結果確認]
                    ↑         ↓(RAG検索)           ↓
                    └─── [人間承認] ←──────────────┘
```

### プロンプト強化
- **基本モード**: 868文字の基本システムプロンプト
- **RAG強化モード**: +81文字の関連コードコンテキスト追加
- **エラー対応モード**: 失敗時の自動修正提案

## 🎪 推奨デモフロー

### Phase 1: 基本機能デモ（5分）
1. 起動 → help → status
2. ファイル操作（ls, read, info）
3. 簡単なAI対話（Hello World作成）

### Phase 2: RAG機能デモ（10分）
1. プロジェクトインデックス化（index）
2. コード検索（search）
3. RAG強化モードでのAI対話
4. グラフ実行状態確認（graph）

### Phase 3: 実践的開発シナリオ（15分）
1. 既存プロジェクト理解
2. 新機能の実装依頼
3. エラー修正とテスト実行
4. 複数ファイルにまたがる変更

## 🔍 デモ時の注目ポイント

### 技術的優位性
- **意味的理解**: 単なる文字列検索を超えた関連コード発見
- **コンテキスト最適化**: 必要な情報のみを効率的に活用
- **状態管理**: LangGraphによる複雑なワークフロー制御
- **エラー耐性**: 自動リトライと修正提案

### 開発体験の向上
- **学習コスト**: プロジェクトのパターンを自動学習
- **一貫性**: 既存スタイルとの自動調和
- **効率性**: 関連コードの自動発見で開発速度向上
- **品質**: ベストプラクティスの自動適用

## 📝 デモ用サンプルタスク

### 初心者向け
```
"calculator.pyファイルを作成して、基本的な四則演算ができる関数を実装して"
```

### 中級者向け
```
"既存のファイル構造を参考に、新しいデータベース接続ヘルパーを作成して"
```

### 上級者向け
```
"プロジェクト全体のエラーハンドリングパターンを調査して、統一的な例外処理クラスを提案して"
```

## 🚨 注意事項

### RAG機能の前提条件
- OpenAI APIキーの設定 OR sentence-transformersのインストール
- 初回インデックス化に数分かかる場合がある
- 大規模プロジェクトでは時間と容量を要する

### パフォーマンス
- RAG検索: 数秒～数十秒
- ファイル操作: 即座
- AI応答: プロバイダー依存（通常数秒）

---

**Duckflow v0.2.1-alpha は、プロジェクト全体を理解する次世代AIコーディングエージェントです！**